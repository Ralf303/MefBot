const { Keyboard, Key } = require("telegram-keyboard");

const { Composer } = require("telegraf");

const c = new Composer();

trigers = [
  "–í–ò–ü",
  "–ê–¥–º–∏–Ω–∫–∞",
  "–ü—Ä–µ—Ñ–∏–∫—Å",
  "–°–Ω—è—Ç—å –í–∞—Ä–Ω",
  "–ê–Ω–æ–Ω",
  "–õ–æ–≥–∏",
  "–°–º–µ–Ω–∞ –ü—Ä–µ—Ñ–∏–∫—Å–∞",
  "–°–Ω—è—Ç—å –±–∞–Ω",
  "–í—ã—Ö–æ–¥ –ß–°",
];

const price = [
  100000, 80000, 40000, 20000, 150000, 25000, 10000, 100000, 200000,
];

function beforeBuy(ctx, item, price, triger) {
  ctx.deleteMessage();
  ctx.reply(
    '–¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ "' +
      item +
      '" —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç ' +
      price +
      "MF\n\n–í–∞—à –±–∞–ª–∞–Ω—Å: " +
      ctx.persone.balance +
      "MF\n\n–í—ã —Å–æ–≥–ª–∞—Å–Ω—ã –Ω–∞ –ø–æ–∫—É–ø–∫—É?",
    Keyboard.make([
      [
        Key.callback("–ö—É–ø–∏—Ç—å", "buy" + triger),
        Key.callback("–ù–∞–∑–∞–¥", "chatAssortiment"),
      ],
    ]).inline()
  );
}

c.action(trigers, (ctx) => {
  const { data } = ctx.callbackQuery;
  const item = trigers.indexOf(data);
  beforeBuy(ctx, trigers[item], price[item], item);
});

c.action("farmApp", (ctx) => {
  ctx.deleteMessage();
  ctx.reply(
    "‚ùóÔ∏è–£–õ–£–ß–®–ï–ù–ò–Ø –î–õ–Ø –§–ï–†–ú–´‚ùóÔ∏è\n\n–í–∞—à —É—Ä–æ–≤–µ–Ω—å —Å–±–æ—Ä–∞: " +
      ctx.persone.lvl.mef +
      "\n–í–∞—à —É—Ä–æ–≤–µ–Ω—å –≤—Ä–µ–º–µ–Ω–∏: " +
      ctx.persone.lvl.time +
      "\n–í–∞—à –º–µ—Ñ: " +
      ctx.persone.balance,
    Keyboard.make([
      ["–£–ª—É—á—à–∏—Ç—å —Å–±–æ—Ä", "–£–ª—É—á—à–∏—Ç—å –≤—Ä–µ–º—è"],
      [Key.callback("–ó–∞–∫—Ä—ã—Ç—å", "dell"), Key.callback("–ù–∞–∑–∞–¥", "menu")],
    ]).inline()
  );
});

c.action("–£–ª—É—á—à–∏—Ç—å —Å–±–æ—Ä", (ctx) => {
  ctx.deleteMessage();
  ctx.reply(
    "üíé–£–ª—É—á—à–µ–Ω–∏–µ —Å–±–æ—Ä–∞üíé\n\n1 –ª–≤–ª: 50-100 –º–µ—Ñ–∞ –∑–∞ —Å–±–æ—Ä\n2 –ª–≤–ª: 100-200 –º–µ—Ñ–∞ –∑–∞ —Å–±–æ—Ä\n3 –ª–≤–ª: 200-400 –º–µ—Ñ–∞ –∑–∞ —Å–±–æ—Ä\n4 –ª–≤–ª: 300-500 –º–µ—Ñ–∞ –∑–∞ —Å–±–æ—Ä\n\nüí∞–ö–∞–∂–¥–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–æ–∏—Ç 20–∫üí∞",
    Keyboard.make([
      [Key.callback("–ö—É–ø–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ", "mefapp")],
      [Key.callback("–ù–∞–∑–∞–¥", "farmApp")],
    ]).inline()
  );
});

c.action("–£–ª—É—á—à–∏—Ç—å –≤—Ä–µ–º—è", (ctx) => {
  ctx.deleteMessage();
  ctx.reply(
    "üïò–£–ª—É—á—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏üïò\n\n–° –∫–∞–∂–¥—ã–º —É—Ä–æ–≤–Ω–µ–º —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Å–±–æ—Ä–æ–º\n–ù–∞ –ø–µ—Ä–≤–æ–º —É—Ä–æ–≤–Ω–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ 4 —á–∞—Å–∞. –í—Å–µ–≥–æ —É—Ä–æ–≤–Ω–µ–π 4 –∏ –∫–∞–∂–¥—ã–π —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –Ω–∞ –æ–¥–∏–Ω —á–∞—Å.\n\nüí∞–¶–µ–Ω–∞ –æ–¥–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è 10–∫üí∞",
    Keyboard.make([
      [Key.callback("–ö—É–ø–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ", "timeapp")],
      [Key.callback("–ù–∞–∑–∞–¥", "farmApp")],
    ]).inline()
  );
});

c.action("dell", (ctx) => {
  ctx.deleteMessage();
});

c.action("chatAssortiment", (ctx) => {
  ctx.deleteMessage();
  ctx.reply(
    "–¢–æ–≤–∞—Ä—ãüì¶\n‚Ä¢–í–ò–ü —Å—Ç–∞—Ç—É—Å –≤ –∏—Ä–∏—Å–µ: 100–∫üí∞\n‚Ä¢+1–ª–≤–ª –∞–¥–º–∏–Ω–∞: 80–∫üí∞\n‚Ä¢–ü—Ä–µ—Ñ–∏–∫—Å: 40–∫üí∞\n‚Ä¢–°–Ω—è—Ç—å –≤–∞—Ä–Ω: 20–∫üí∞\n‚Ä¢–ö—É–ø–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å: 150–∫üí∞\n‚Ä¢–î–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º: 25–∫üí∞\n‚Ä¢–°–º–µ–Ω–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞: 10–∫üí∞\n‚Ä¢–°–Ω—è—Ç—å –±–∞–Ω: 100–∫üí∞\n‚Ä¢–í—ã—Ö–æ–¥ –∏–∑ –ß–°: 200–∫üí∞\n\n‚ùóÔ∏è–º–∞–≥–∞–∑–∏–Ω –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω 3+ —Ä–∞–Ω–≥–∞–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤‚ùóÔ∏è",
    Keyboard.make([
      ["–í–ò–ü", "–ê–¥–º–∏–Ω–∫–∞", "–ü—Ä–µ—Ñ–∏–∫—Å"],
      ["–°–Ω—è—Ç—å –í–∞—Ä–Ω", "–ê–Ω–æ–Ω", "–õ–æ–≥–∏"],
      ["–°–º–µ–Ω–∞ –ü—Ä–µ—Ñ–∏–∫—Å–∞", "–°–Ω—è—Ç—å –±–∞–Ω", "–í—ã—Ö–æ–¥ –ß–°"],
      [Key.callback("–ó–∞–∫—Ä—ã—Ç—å", "dell"), Key.callback("–ù–∞–∑–∞–¥", "menu")],
    ]).inline()
  );
});

c.action("menu", (ctx) => {
  ctx.deleteMessage();
  ctx.reply(
    "–í—ã–±–µ—Ä–∏—Ç–µ —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å:",
    Keyboard.make([
      [
        Key.callback("–¢–æ–≤–∞—Ä—ã –¥–ª—è —á–∞—Ç–∞", "chatAssortiment"),
        Key.callback("–£–ª—É—á—à–µ–Ω–∏—è", "farmApp"),
      ],
      [Key.callback("–ó–∞–∫—Ä—ã—Ç—å", "dell")],
    ]).inline()
  );
});

module.exports = c;
